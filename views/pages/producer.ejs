<main>


    <section id="left">
      <div id="header">
        <div class="search-container">
            <button class="choose-btn">Choose:</button>
            <input type="text" placeholder="Search..." name="search" id="searchInput">
        </div>
      </div>


      <div class="search-results-container">
        <h4 style="font-size: 1em; color: #27ae20;">Suggestions:</h4>
        <div class="long-box">
            <ul id="songResults">
                <% if (songs && songs.length) { %>
                    <% songs.forEach(song => { %>
                        <li><%= song.title %> by <%= song.artist %></li>
                    <% }); %>
                <% } else { %>
                    <li><p>No songs found or enter a search query</p></li>
                <% } %>
            </ul>
        </div>
    </div>
    
      

      <script>
        (function() {
            const songsData = JSON.parse('<%- JSON.stringify(songs) %>');
      
            function searchSongsByTitle(substring) {
                const query = substring.toLowerCase();
                let results = [];
      
                songsData.forEach(song => {
                    if (song.title.toLowerCase().includes(query)) {
                        results.push(song);
                    }
                });
      
                return results;
            }
      
            document.getElementById('searchInput').addEventListener('input', function() {
                const searchResults = searchSongsByTitle(this.value);
                const resultsList = document.getElementById('songResults');
      
                resultsList.innerHTML = ''; 
      
                if (this.value.trim() === '') {
                    resultsList.innerHTML = '<li><p>Enter a search query</p></li>';
                    return;
                }
      
                searchResults.forEach(song => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `${song.title} by ${song.artist}`;
                    resultsList.appendChild(listItem);
                });
            });
        })();
      </script>
      





        <div id="dj-date" style = "display: none;">
          
        </div>


        

       <div id= "producer-dj" class="report-section">
          <!-- <div class="search-container">
            <input type="text" placeholder="Your search result will be shown bellow" name="search_2">
          </div> -->

          <div class="search-results-container">

            <div class = "super_song_alt">
              <div class="song-alt">
                <div class="image-container">
                  <img src="../images/ncs.jpg" alt=""> 
                     
                </div>
                <div class="song-text">
                    <p>T & Sugah- Set Me Free</p>
                </div>
                <div class="image-container">
                    <!-- <img src="../images/delete_button.png" alt="" class="right-of-text" onclick="removeSong(this)">   -->
                </div>
              </div>
            </div>

            <div class = "super_song_alt">
              <div class="song-alt">
                <div class="image-container">
                  <img src="../images/ncs.jpg" alt=""> 
                     
                </div>
                <div class="song-text">
                    <p>T & Sugah- Set Me Free</p>
                </div>
                <div class="image-container">
                    <!-- <img src="../images/delete_button.png" alt="" class="right-of-text" onclick="removeSong(this)">   -->
                </div>
              </div>
            </div>


            <div class = "super_song_alt">
              <div class="song-alt">
                <div class="image-container">
                  <img src="../images/ncs.jpg" alt=""> 
                     
                </div>
                <div class="song-text">
                    <p>T & Sugah- Set Me Free</p>
                </div>
                <div class="image-container">
                    <!-- <img src="../images/delete_button.png" alt="" class="right-of-text" onclick="removeSong(this)">   -->
                </div>
              </div>
            </div>



            
        
            </div>
          </div>


          
        
        
          </div>





          <div>
            <form id="djSelectionForm" onsubmit="return validateDJSelection()" method="post" action="/producer/adddj">
              <div class="form-container">
                  <div class="form-row">
                      <div class="form-group">
                          <label for="djSelection">Select DJ:</label>
                          <select name="djs" id="dj-select" class="form-select">
                            <% for (let i = 0; i < djs.length; i++) {%>
                                <option value="<%= djs[i].name.toLowerCase() %>"><%= djs[i].name %></option>
                            <% } %>
                        </select>
                          <!-- <select name="djSelection" id="djSelection">
                              <option value="">Select DJ</option>
                              <option value="djBlue">DJ Blue</option>
                              <option value="djGray">DJ Gray</option>
                          </select> -->
                      </div>
          
                      <div class="form-group">
                          <label for="timeslotSelection">Select Timeslot:</label>
                          <select name="timeslotSelection" id="timeslotSelection">
                              <option value="">Select Timeslot</option>
                              <option value="morning">Morning</option>
                              <option value="afternoon">Afternoon</option>
                              <option value="evening">Evening</option>
                          </select>
                      </div>
          
                      <div class="form-group">
                          <label for="dayInput">Day Number:</label>
                          <input type="text" id="dayInput" name="dayInput" placeholder="Enter Day Number"/>
                      </div>
          
                      <div class="form-submit">
                          <button type="submit">Add</button>
                      </div>
                  </div>
              </div>
          </form>
          
          
          
          
          <script>
              function validateDJSelection() {
                  var djSelectionElement = document.getElementById("djSelection");
                  var djSelectionValue = djSelectionElement.value;
          
                  if (djSelectionValue === "") {
                      alert("Please select a DJ.");
                      djSelectionElement.focus();
                      return false; // Prevent form submission
                  }else{
          
                  alert("DJ Selected: " + djSelectionElement.options[djSelectionElement.selectedIndex].text);
                  return true; // Allow form submission
                  }
              }
          
              function addTime() {
                  var timeInput = document.getElementById("timeInput").value;
                  var timeFormatRegex = /^\d{1,2}:\d{2}$/;
                  if (timeInput === ""){
                    alert("Please input a time");
                  } else if (!timeFormatRegex.test(timeInput)) {
                    alert("Invalid format. Please use HH:MM format.");                  
                  }else{
                  alert("Time Added: " + timeInput);
                }
              }
  
                      
              let DJ_gary = {
                  name: "Gray Boots",
                  showName: "gray ocean",
                  yearsExperience: 10,
                  color: "##808080" //gray in hex
              };
  
              let DJ_blue = {
                  name: "Blue Shoes",
                  showName: "blue sky",
                  yearsExperience: 10,
                  color: "#008000" //blue in hex
              };
  
    
              function removeSong(element) {
                if (confirm("Remove this song?")) {
                  element.closest('.song-alt').remove();
                }
              }
   
          </script>
          </div>


        </div>
      </section>






      <section id="right">
        <div class="top-menu">
          <div class="date-menu">
            <i id="prev-day-btn" class="fa-solid fa-caret-left" style="padding-left: 0.5em"></i>
            
            <h2 id="date-range">Feb 10 - Feb 12</h2>
            <i id="next-day-btn" class="fa-solid fa-caret-right" style="padding-right: 0.5em"></i>
          </div>
        </div>
        <%- timetable %>
      </section>

</main>
